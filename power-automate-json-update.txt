{
  "Id": "@{guid()}",
  "Start time": "@{if(empty(coalesce(triggerBody()?['body']?['bookingTime'], triggerBody()?['bookingTime'])), convertTimeZone(utcNow(), 'UTC', 'New Zealand Standard Time', 'dd/MM/yyyy hh:mm:ss tt'), convertTimeZone(coalesce(triggerBody()?['body']?['bookingTime'], triggerBody()?['bookingTime']), 'UTC', 'New Zealand Standard Time', 'dd/MM/yyyy hh:mm:ss tt'))}",
  "Completion time": "",
  "BookingID": "@{if(not(empty(triggerBody()?['body']?['idempotencyKey'])), substring(triggerBody()?['body']?['idempotencyKey'], 3), '')}",
  "Email": "@{trim(coalesce(triggerBody()?['body']?['email'], triggerBody()?['email'], ''))}",
  "Name": "@{trim(coalesce(triggerBody()?['body']?['name'], triggerBody()?['name'], ''))}",
  "Name1": "@{trim(coalesce(triggerBody()?['body']?['name'], triggerBody()?['name'], ''))}",
  "Country Code": "+64",
  "Caller phone": "@{if(startsWith(trim(coalesce(triggerBody()?['body']?['phone'], triggerBody()?['phone'], '')), '64'), substring(trim(coalesce(triggerBody()?['body']?['phone'], triggerBody()?['phone'], '')), 2), trim(coalesce(triggerBody()?['body']?['phone'], triggerBody()?['phone'], '')))}",
  "Fault": "@{coalesce(trim(coalesce(triggerBody()?['body']?['details'], triggerBody()?['details'])), 'None specified')}",
  "Service Required": "@{trim(coalesce(triggerBody()?['body']?['serviceTitle'], triggerBody()?['serviceTitle'], ''))}",
  "From Location": "@{trim(coalesce(triggerBody()?['body']?['location'], triggerBody()?['location'], ''))}",
  "To Location (if applicable)": "@{if(or(contains(coalesce(triggerBody()?['body']?['service'], triggerBody()?['service'], ''), 'inspection'), not(empty(coalesce(triggerBody()?['body']?['sellerName'], triggerBody()?['sellerName'])))), concat('SELLER|', coalesce(trim(coalesce(triggerBody()?['body']?['sellerName'], triggerBody()?['sellerName'])), 'None'), '|', coalesce(trim(coalesce(triggerBody()?['body']?['sellerPhone'], triggerBody()?['sellerPhone'])), 'None'), '|', trim(coalesce(triggerBody()?['body']?['year'], triggerBody()?['year'], '')), ' ', trim(coalesce(triggerBody()?['body']?['make'], triggerBody()?['make'], '')), ' ', trim(coalesce(triggerBody()?['body']?['model'], triggerBody()?['model'], '')), '|', trim(coalesce(triggerBody()?['body']?['scheduledDate'], triggerBody()?['scheduledDate'], '')), '|', trim(coalesce(triggerBody()?['body']?['timeWindow'], triggerBody()?['timeWindow'], ''))), '')}",
  "Email Address": "@{trim(coalesce(triggerBody()?['body']?['email'], triggerBody()?['email'], ''))}",
  "Rego": "@{replace(toUpper(trim(coalesce(triggerBody()?['body']?['rego'], triggerBody()?['rego'], ''))), ' ', '')}",
  "Make": "@{trim(coalesce(triggerBody()?['body']?['make'], triggerBody()?['make'], ''))}",
  "Model": "@{trim(coalesce(triggerBody()?['body']?['model'], triggerBody()?['model'], ''))}",
  "Year": "@{trim(coalesce(triggerBody()?['body']?['year'], triggerBody()?['year'], ''))}",
  "Tyre Size (if applicable)": "@{coalesce(triggerBody()?['body']?['tyreSize'], triggerBody()?['tyreSize'], '')}",
  "Payment method": "Debit / Credit Card",
  "Currency": "NZD",
  "Price": "@{string(coalesce(triggerBody()?['body']?['price'], triggerBody()?['price'], '0'))}",
  "ETA": "30-90"
}
